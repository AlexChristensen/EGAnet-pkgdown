<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Predict New Data based on Network — network.predictability • EGAnet</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Predict New Data based on Network — network.predictability"><meta name="description" content="General function to compute a network's predictive power on new data,
following Haslbeck and Waldorp (2018) and Williams and Rodriguez (2022)
This implementation is different from the predictability in the mgm package
(Haslbeck), which is based on (regularized) regression. This implementation uses
the network directly, converting the partial correlations into an implied
precision (inverse covariance) matrix. See Details for more information"><meta property="og:description" content="General function to compute a network's predictive power on new data,
following Haslbeck and Waldorp (2018) and Williams and Rodriguez (2022)
This implementation is different from the predictability in the mgm package
(Haslbeck), which is based on (regularized) regression. This implementation uses
the network directly, converting the partial correlations into an implied
precision (inverse covariance) matrix. See Details for more information"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EGAnet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/quick-start.html">Quick Start</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-workflows" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Workflows</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-workflows"><li><a class="dropdown-item" href="../articles/ega.html">Exploratory Graph Analysis</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/ega-nlp.html">EGA + Transformers NLP</a></li>
    <li><a class="dropdown-item" href="../articles/modular-approach.html">Using External Networks</a></li>
    <li><a class="dropdown-item" href="../articles/argument-flexibility.html">Argument Passing</a></li>
    <li><a class="dropdown-item" href="../articles/plotting.html">Plotting</a></li>
    <li><a class="dropdown-item" href="../articles/index.html">More Articles...</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/errors.html">Errors</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/research.html">Publications</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/teaching.html">Teaching</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hfgolino/EGAnet/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Predict New Data based on Network</h1>
      <small class="dont-index">Source: <a href="https://github.com/hfgolino/EGAnet/blob/HEAD/R/network.predictability.R" class="external-link"><code>R/network.predictability.R</code></a></small>
      <div class="d-none name"><code>network.predictability.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>General function to compute a network's predictive power on new data,
following Haslbeck and Waldorp (2018) and Williams and Rodriguez (2022)</p>
<p>This implementation is different from the <code>predictability</code> in the <code>mgm</code> package
(Haslbeck), which is based on (regularized) regression. This implementation uses
the network directly, converting the partial correlations into an implied
precision (inverse covariance) matrix. See <strong>Details</strong> for more information</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">network.predictability</span><span class="op">(</span><span class="va">network</span>, <span class="va">original.data</span>, <span class="va">newdata</span>, ordinal.categories <span class="op">=</span> <span class="fl">7</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-network">network<a class="anchor" aria-label="anchor" href="#arg-network"></a></dt>
<dd><p>Matrix or data frame.
A partial correlation network</p></dd>


<dt id="arg-original-data">original.data<a class="anchor" aria-label="anchor" href="#arg-original-data"></a></dt>
<dd><p>Matrix or data frame.
Must consist only of variables to be used to estimate the <code>network</code>.
See <strong>Examples</strong></p></dd>


<dt id="arg-newdata">newdata<a class="anchor" aria-label="anchor" href="#arg-newdata"></a></dt>
<dd><p>Matrix or data frame.
Must consist of the same variables in the same order as <code>original.data</code>.
See <strong>Examples</strong></p></dd>


<dt id="arg-ordinal-categories">ordinal.categories<a class="anchor" aria-label="anchor" href="#arg-ordinal-categories"></a></dt>
<dd><p>Numeric (length = 1).
<em>Up to</em> the number of categories <em>before</em> a variable is considered continuous.
Defaults to <code>7</code> categories before <code>8</code> is considered continuous</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns a list containing:</p>
<dl><dt>predictions</dt>
<dd><p>Predicted values of <code>newdata</code> based on the <code>network</code></p></dd>


<dt>betas</dt>
<dd><p>Beta coefficients derived from the <code>network</code></p></dd>


<dt>results</dt>
<dd><p>Performance metrics for each variable in <code>newdata</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>This implementation of network predictability proceeds in several steps
with important assumptions:</p>
<p>1. Network was estimated using (partial) correlations (not regression like the
<code>mgm</code> package!)</p>
<p>2. Original data that was used to estimate the network in 1. is necessary to
apply the original scaling to the new data</p>
<p>3. (Linear) regression-like coefficients are obtained by reserve engineering the
inverse covariance matrix using the network's partial correlations (i.e.,
by setting the diagonal of the network to -1 and computing the inverse
of the opposite signed partial correlation matrix; see <code>EGAnet:::pcor2inv</code>)</p>
<p>4. Predicted values are obtained by matrix multiplying the new data with these
coefficients</p>
<p>5. <strong>Dichotomous and polytomous</strong> data are given categorical values based
on the <strong>original data's</strong> thresholds and these thresholds are used to
convert the continuous predicted values into their corresponding categorical values</p>
<p>6. Evaluation metrics:</p>
<ul><li><p>dichotomous — <code>"Accuracy"</code> or the percent correctly predicted for the 0s and 1s
and <code>"Kappa"</code> or Cohen's Kappa (see cite)</p></li>
<li><p>polytomous — <code>"Linear Kappa"</code> or linearly weighted Kappa and
<code>"Krippendorff's alpha"</code> (see cite)</p></li>
<li><p>continuous — R-squared (<code>"R2"</code>) and root mean square error (<code>"RMSE"</code>)</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p><strong>Original Implementation of Node Predictability</strong> <br>
Haslbeck, J. M., &amp; Waldorp, L. J. (2018).
How well do network models predict observations? On the importance of predictability in network models.
<em>Behavior Research Methods</em>, <em>50</em>(2), 853–861.</p>
<p><strong>Derivation of Regression Coefficients Used (Formula 3)</strong> <br>
Williams, D. R., &amp; Rodriguez, J. E. (2022).
Why overfitting is not (usually) a problem in partial correlation networks.
<em>Psychological Methods</em>, <em>27</em>(5), 822–840.</p>
<p><strong>Cohen's Kappa</strong> <br>
Cohen, J. (1960). A coefficient of agreement for nominal scales.
<em>Educational and Psychological Measurement</em>, <em>20</em>(1), 37-46.</p>
<p>Cohen, J. (1968). Weighted kappa: nominal scale agreement provision for scaled disagreement or partial credit.
<em>Psychological Bulletin</em>, <em>70</em>(4), 213-220.</p>
<p><strong>Krippendorff's alpha</strong> <br>
Krippendorff, K. (2013).
Content analysis: An introduction to its methodology (3rd ed.).
Thousand Oaks, CA: Sage.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Hudson Golino &lt;hfg9s at virginia.edu&gt; and Alexander P. Christensen &lt;alexpaulchristensen@gmail.com&gt;</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># Load data</span></span></span>
<span class="r-in"><span><span class="va">wmt</span> <span class="op">&lt;-</span> <span class="va">wmt2</span><span class="op">[</span>,<span class="fl">7</span><span class="op">:</span><span class="fl">24</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set seed (to reproduce results)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Split data</span></span></span>
<span class="r-in"><span><span class="va">training</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">wmt</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">wmt</span><span class="op">)</span> <span class="op">*</span> <span class="fl">0.80</span><span class="op">)</span> <span class="co"># 80/20 split</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Set splits</span></span></span>
<span class="r-in"><span><span class="va">wmt_train</span> <span class="op">&lt;-</span> <span class="va">wmt</span><span class="op">[</span><span class="va">training</span>,<span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">wmt_test</span> <span class="op">&lt;-</span> <span class="va">wmt</span><span class="op">[</span><span class="op">-</span><span class="va">training</span>,<span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># EBICglasso (default for EGA functions)</span></span></span>
<span class="r-in"><span><span class="va">glasso_network</span> <span class="op">&lt;-</span> <span class="fu"><a href="network.estimation.html">network.estimation</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  data <span class="op">=</span> <span class="va">wmt_train</span>, model <span class="op">=</span> <span class="st">"glasso"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Check predictability</span></span></span>
<span class="r-in"><span><span class="fu">network.predictability</span><span class="op">(</span></span></span>
<span class="r-in"><span>  network <span class="op">=</span> <span class="va">glasso_network</span>, original.data <span class="op">=</span> <span class="va">wmt_train</span>,</span></span>
<span class="r-in"><span>  newdata <span class="op">=</span> <span class="va">wmt_test</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          R2   MAE</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt1  0.315 0.253</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt2  0.548 0.135</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt3  0.476 0.198</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt4  0.318 0.300</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt5  0.400 0.249</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt6  0.403 0.262</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt7  0.362 0.291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt8  0.278 0.321</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt9  0.552 0.232</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt10 0.340 0.278</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt11 0.220 0.270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt12 0.193 0.287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt13 0.425 0.270</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt14 0.252 0.325</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt15 0.166 0.291</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt16 0.260 0.287</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt17 0.194 0.203</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> wmt18 0.372 0.236</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hudson Golino, Alexander Christensen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

