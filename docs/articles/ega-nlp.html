<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>EGA + Transformers NLP • EGAnet</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="EGA + Transformers NLP">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="default" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">EGAnet</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.7</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/quick-start.html">Quick Start</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-workflows" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Workflows</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-workflows">
<li><a class="dropdown-item" href="../articles/ega.html">Exploratory Graph Analysis</a></li>
  </ul>
</li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/ega-nlp.html">EGA + Transformers NLP</a></li>
    <li><a class="dropdown-item" href="../articles/modular-approach.html">Using External Networks</a></li>
    <li><a class="dropdown-item" href="../articles/argument-flexibility.html">Argument Passing</a></li>
    <li><a class="dropdown-item" href="../articles/plotting.html">Plotting</a></li>
    <li><a class="dropdown-item" href="../articles/index.html">More Articles...</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Functions</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">News</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/errors.html">Errors</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/research.html">Publications</a></li>
<li class="nav-item"><a class="nav-link" href="../articles/teaching.html">Teaching</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/hfgolino/EGAnet/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>EGA + Transformers NLP</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/hfgolino/EGAnet/blob/HEAD/vignettes/ega-nlp.Rmd" class="external-link"><code>vignettes/ega-nlp.Rmd</code></a></small>
      <div class="d-none name"><code>ega-nlp.Rmd</code></div>
    </div>

    
    
<p>Transformers models are taking the data science world by storm. Their
rise in popularity is due to their unparalleled ability to understand
contextual information in language. In short, these models can quantify
the qualitative.</p>
<p>To demonstrate how transformers natural language processing (NLP) can
be used in combination with {EGAnet}, we’ll use an example of Taylor
Swift’s first and most recent albums: <em>Taylor Swift</em> and
<em>Midnights</em>.</p>
<div class="section level3">
<h3 id="set-up-transformers-nlp-and-genius-api">Set Up Transformers NLP and Genius API<a class="anchor" aria-label="anchor" href="#set-up-transformers-nlp-and-genius-api"></a>
</h3>
<p>To get started, the <a href="https://r-text.org" class="external-link">{text}</a> package
needs to be installed and set up (see <a href="http://r-text.org/articles/huggingface_in_r_extended_installation_guide.html" class="external-link">{text}
installation</a> for instructions on getting set up).</p>
<p>Once set up, load {text}:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-text.org/" class="external-link">text</a></span><span class="op">)</span></span></code></pre></div>
<p>We’ll use another package called {simpleRgenius} to scrape lyrics
from the <a href="https://genius.com/" class="external-link">Genius</a> lyrics website. This
package needs to be installed from GitHub and loaded:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Install {devtools} (if necessary)</span></span>
<span><span class="kw">if</span><span class="op">(</span><span class="op">!</span><span class="st">"devtools"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/unlist.html" class="external-link">unlist</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">list.files</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"devtools"</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Install {simpleRgenius}</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"AlexChristensen/simpleRgenius"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load {simpleRgenius}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/AlexChristensen/simpleRgenius" class="external-link">simpleRgenius</a></span><span class="op">)</span></span></code></pre></div>
<p>After installing {simpleRgenius}, you’ll need to set up an API with
Genius (only necessary to reproduce this example). You can follow the
instructions <a href="https://github.com/AlexChristensen/simpleRgenius/wiki/Genius-API-Setup" class="external-link">here</a>.</p>
</div>
<div class="section level3">
<h3 id="scraping-lyrics">Scraping Lyrics<a class="anchor" aria-label="anchor" href="#scraping-lyrics"></a>
</h3>
<p>At this point, you should have loaded {text} and {simpleRgenius} as
well as imported your Genius API into R’s environment (if following
along and reproducing the code). The next step is to get all of the
songs for Taylor Swift’s <em>Midnights</em> album:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># First, let's get all of the song names</span></span>
<span><span class="va">midnights_songs</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"Lavender Haze"</span>, <span class="st">"Maroon"</span>, <span class="st">"Anti-Hero"</span>,</span>
<span>  <span class="st">"Snow On The Beach"</span>, <span class="st">"You're On Your Own, Kid"</span>,</span>
<span>  <span class="st">"Midnight Rain"</span>, <span class="st">"Question...?"</span>, <span class="st">"Vigilante Shit"</span>,</span>
<span>  <span class="st">"Bejeweled"</span>, <span class="st">"Labyrinth"</span>, <span class="st">"Karma"</span>,</span>
<span>  <span class="st">"Sweet Nothing"</span>, <span class="st">"Mastermind"</span>, </span>
<span>  <span class="st">"The Great War"</span>, <span class="st">"Bigger Than The Whole Sky"</span>,</span>
<span>  <span class="st">"Paris"</span>, <span class="st">"High Infidelity"</span>, <span class="st">"Glitch"</span>,</span>
<span>  <span class="st">"Would've, Could've, Should've"</span>,</span>
<span>  <span class="st">"Dear Reader"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Next, let's get the lyrics</span></span>
<span><span class="va">midnights_lyrics</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/simpleRgenius/man/get_lyrics.html" class="external-link">get_lyrics</a></span><span class="op">(</span></span>
<span>  artist_name <span class="op">=</span> <span class="st">"Taylor Swift"</span>,</span>
<span>  song_names <span class="op">=</span> <span class="va">midnights_songs</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="perform-zero-shot-classification">Perform Zero-shot Classification<a class="anchor" aria-label="anchor" href="#perform-zero-shot-classification"></a>
</h3>
<p>Next, zero-shot classification can be performed. There are many
different models on <a href="https://huggingface.co" class="external-link">huggingface</a> to
choose from. We’ll use Cross Encoder’s base <a href="https://huggingface.co/cross-encoder/nli-roberta-base" class="external-link">RoBERTa</a>
model:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">midnights_zero</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://r-text.org/reference/textZeroShot.html" class="external-link">textZeroShot</a></span><span class="op">(</span></span>
<span>  sequences <span class="op">=</span> <span class="va">midnights_lyrics</span><span class="op">$</span><span class="va">Lyric</span>, <span class="co"># text</span></span>
<span>  candidate_labels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>    <span class="st">"anxiety"</span>, <span class="st">"depression"</span>, <span class="st">"happiness"</span>,</span>
<span>    <span class="st">"heartbreak"</span>, <span class="st">"love"</span>, <span class="st">"relationships"</span>,</span>
<span>    <span class="st">"rebellious"</span>, <span class="st">"revenge"</span>, <span class="st">"romance"</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="co"># theme (same as sentiment analysis)</span></span>
<span>  model <span class="op">=</span> <span class="st">"cross-encoder/nli-roberta-base"</span>,</span>
<span>  <span class="co"># model to use</span></span>
<span>  multi_label <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>  <span class="co"># whether multiple labels can be true</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reformat-zero-shot-output-into-long-format">Reformat Zero-shot Output into Long Format<a class="anchor" aria-label="anchor" href="#reformat-zero-shot-output-into-long-format"></a>
</h3>
<p>To analyze data with {EGAnet}, data need to be in wide format. But
first, let’s do some basic NLP and visualization. The following code
will (1) reformat the data into long format, (2) remove non-existent
labels, (3) add back song names, and (4) summarize the lyrics by
song:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load {tidyverse}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Wrangle the data</span></span>
<span><span class="va">midnights_long</span> <span class="op">&lt;-</span> <span class="va">midnights_zero</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"labels_"</span><span class="op">)</span> <span class="op">|</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"scores_"</span><span class="op">)</span>,</span>
<span>    <span class="co"># Obtain columns with labels and scores</span></span>
<span>    names_to <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">".value"</span>, <span class="st">"label_number"</span><span class="op">)</span>,</span>
<span>    <span class="co"># Push the names to new columns</span></span>
<span>    names_pattern <span class="op">=</span> <span class="st">"(labels|scores)_(x_.*)"</span></span>
<span>    <span class="co"># Set up the patterning for labels and scores</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Remove NAs</span></span>
<span><span class="va">midnights_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="va">midnights_long</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Initialize vector for song names</span></span>
<span><span class="va">song_names</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span>length <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">midnights_long</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Create loop to store song names</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fl">1</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">midnights_long</span><span class="op">)</span><span class="op">)</span><span class="op">{</span></span>
<span>  </span>
<span>  <span class="co"># Get matches for lyric</span></span>
<span>  <span class="va">lyric_match</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">min</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/match.html" class="external-link">match</a></span><span class="op">(</span> <span class="co"># Use `min` to get only one index</span></span>
<span>      <span class="va">midnights_long</span><span class="op">$</span><span class="va">sequence</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,</span>
<span>      <span class="va">midnights_lyrics</span><span class="op">$</span><span class="va">Lyric</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  </span>
<span>  <span class="co"># Get song name</span></span>
<span>  <span class="va">song_names</span><span class="op">[</span><span class="va">i</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">midnights_lyrics</span><span class="op">$</span><span class="va">Song</span><span class="op">[</span><span class="va">lyric_match</span><span class="op">]</span></span>
<span>  </span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Create vector to add songs back</span></span>
<span><span class="va">midnights_long</span><span class="op">$</span><span class="va">song_name</span> <span class="op">&lt;-</span> <span class="va">song_names</span></span>
<span></span>
<span><span class="co"># Summarize by song</span></span>
<span><span class="va">midnights_summary</span> <span class="op">&lt;-</span> <span class="va">midnights_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">song_name</span>, <span class="va">labels</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span></span>
<span>    Probability <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span></span>
<span>      <span class="va">scores</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="basic-nlp-visualization">Basic NLP Visualization<a class="anchor" aria-label="anchor" href="#basic-nlp-visualization"></a>
</h3>
<div class="section level4">
<h4 id="keep-order-of-songs">Keep Order of Songs<a class="anchor" aria-label="anchor" href="#keep-order-of-songs"></a>
</h4>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Before visualizing...</span></span>
<span><span class="co">## Create factor to keep songs in order</span></span>
<span><span class="va">midnights_summary</span><span class="op">$</span><span class="va">song_name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span></span>
<span>  <span class="va">midnights_summary</span><span class="op">$</span><span class="va">song_name</span>,</span>
<span>  levels <span class="op">=</span> <span class="va">midnights_songs</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="bar-plot-by-song">Bar Plot by Song<a class="anchor" aria-label="anchor" href="#bar-plot-by-song"></a>
</h4>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualize using histogram</span></span>
<span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">midnights_summary</span>,</span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">Probability</span>, y <span class="op">=</span> <span class="va">labels</span>, fill <span class="op">=</span> <span class="va">labels</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="op">~</span><span class="va">song_name</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_histogram.html" class="external-link">geom_histogram</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Probability"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Sentiment"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Midnights Album Sentiment"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_y_discrete</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="va">rev</span><span class="op">)</span> <span class="op">+</span> <span class="co"># reverse order</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span> <span class="co"># basic theme</span></span>
<span>    panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    axis.line <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span>,</span>
<span>    strip.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    legend.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<p><img src="ega-nlp_files/figure-html/unnamed-chunk-10-1.png" width="1248" style="display: block; margin: auto;"></p>
</div>
<div class="section level4">
<h4 id="album-arch-of-relationships-theme">Album Arch of “relationships” Theme<a class="anchor" aria-label="anchor" href="#album-arch-of-relationships-theme"></a>
</h4>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Visualize using line plot</span></span>
<span><span class="va">midnights_summary</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span> <span class="co"># focus on relationships across songs</span></span>
<span>    alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">labels</span> <span class="op">==</span> <span class="st">"relationships"</span>, <span class="fl">1</span>, <span class="fl">0.25</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span></span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">song_name</span>, y <span class="op">=</span> <span class="va">Probability</span>, group <span class="op">=</span> <span class="va">labels</span>, </span>
<span>      color <span class="op">=</span> <span class="va">labels</span>, alpha <span class="op">=</span> <span class="va">alpha</span></span>
<span>    <span class="op">)</span> </span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    x <span class="op">=</span> <span class="st">"Song"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Probability"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Midnights Album Arch"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span> <span class="co"># basic theme</span></span>
<span>    panel.background <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    legend.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_blank</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>    plot.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">16</span>, hjust <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span>,</span>
<span>    axis.line <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>    axis.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>,</span>
<span>    axis.title <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">14</span><span class="op">)</span>,</span>
<span>    legend.text <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>,</span>
<span>    legend.position <span class="op">=</span> <span class="st">"bottom"</span>,</span>
<span>    legend.key <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_rect</a></span><span class="op">(</span>fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span>, <span class="co"># remove grey box</span></span>
<span>    axis.text.x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_text</a></span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_identity.html" class="external-link">scale_alpha_identity</a></span><span class="op">(</span>guide <span class="op">=</span> <span class="st">"none"</span><span class="op">)</span></span></code></pre></div>
<p><img src="ega-nlp_files/figure-html/unnamed-chunk-11-1.png" width="960" style="display: block; margin: auto;"></p>
</div>
</div>
<div class="section level3">
<h3 id="get-dimensionality-of-album">Get Dimensionality of Album<a class="anchor" aria-label="anchor" href="#get-dimensionality-of-album"></a>
</h3>
<div class="section level4">
<h4 id="reformat-lyrics-into-wide-format">Reformat Lyrics into Wide Format<a class="anchor" aria-label="anchor" href="#reformat-lyrics-into-wide-format"></a>
</h4>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Make each sentiment a column with values</span></span>
<span><span class="va">midnights_wide</span> <span class="op">&lt;-</span> <span class="va">midnights_long</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_wider.html" class="external-link">pivot_wider</a></span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="st">"labels"</span>,</span>
<span>    values_from <span class="op">=</span> <span class="st">"scores"</span></span>
<span>  <span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">song_name</span>, <span class="va">sequence</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/summarise.html" class="external-link">summarize</a></span><span class="op">(</span> </span>
<span>    anxiety <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">anxiety</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, <span class="co"># CHANGE!</span></span>
<span>    depression <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">depression</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    happiness <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">happiness</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    heartbreak <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">heartbreak</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    love <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">love</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    relationships <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">relationships</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    rebellious <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">rebellious</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    revenge <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">revenge</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    romance <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html" class="external-link">sum</a></span><span class="op">(</span><span class="va">romance</span>, na.rm <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="perform-ega">Perform EGA<a class="anchor" aria-label="anchor" href="#perform-ega"></a>
</h4>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Load {EGAnet}</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://r-ega.net">EGAnet</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Perform EGA</span></span>
<span><span class="va">midnights_ega</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/EGA.html">EGA</a></span><span class="op">(</span><span class="va">midnights_wide</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<p><img src="ega-nlp_files/figure-html/unnamed-chunk-13-1.png" width="700"></p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">midnights_ega</span><span class="op">)</span></span></code></pre></div>
<pre><code>Model: GLASSO (EBIC with gamma = 0.5)
Correlations: auto
Lambda: 0.0860989626435201 (n = 100, ratio = 0.1)

Number of nodes: 9
Number of edges: 21
Edge density: 0.583

Non-zero edge weights: 
     M    SD    Min   Max
 0.130 0.183 -0.077 0.486

----

Algorithm:  Walktrap

Number of communities:  2

      anxiety    depression     happiness    heartbreak          love 
            1             2             2             1             2 
relationships    rebellious       revenge       romance 
            2             1             1             2 

----

Unidimensional Method: Louvain
Unidimensional: No

----

TEFI: -5.021</code></pre>
</div>
<div class="section level4">
<h4 id="check-stability-of-ega">Check Stability of EGA<a class="anchor" aria-label="anchor" href="#check-stability-of-ega"></a>
</h4>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform bootstrap EGA</span></span>
<span><span class="va">midnights_boot</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/bootEGA.html">bootEGA</a></span><span class="op">(</span><span class="va">midnights_wide</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span>, seed <span class="op">=</span> <span class="fl">12</span><span class="op">)</span></span></code></pre></div>
<p><img src="ega-nlp_files/figure-html/unnamed-chunk-14-1.png" width="700"></p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get summary</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">midnights_boot</span><span class="op">)</span></span></code></pre></div>
<pre><code>Model: GLASSO (EBIC)
Correlations: auto
Algorithm:  Walktrap
Unidimensional Method:  Louvain

----

EGA Type: EGA 
Bootstrap Samples: 500 (Parametric)
                       
                2     3
Frequency:  0.996 0.004

Median dimensions: 2 [1.88, 2.12] 95% CI</code></pre>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform dimension stability</span></span>
<span><span class="fu"><a href="../reference/dimensionStability.html">dimensionStability</a></span><span class="op">(</span><span class="va">midnights_boot</span><span class="op">)</span></span></code></pre></div>
<p><img src="ega-nlp_files/figure-html/unnamed-chunk-14-2.png" width="700"></p>
<pre><code>EGA Type: EGA 
Bootstrap Samples: 500 (Parametric)

Proportion Replicated in Dimensions:

      anxiety    depression     happiness    heartbreak          love 
        1.000         0.528         1.000         1.000         1.000 
relationships    rebellious       revenge       romance 
        0.998         0.998         0.996         1.000 

----

Structural Consistency:

    1     2 
0.996 0.558 </code></pre>
<p>Overall, the dimensions are relative stable. The
<code>depression</code> theme goes between the first and second
dimension (roughly positive and negative valence themes,
respectively).</p>
</div>
</div>
<div class="section level3">
<h3 id="invariance-between-the-taylor-swift-and-midnights-albums">Invariance between the <em>Taylor Swift</em> and <em>Midnights</em>
Albums<a class="anchor" aria-label="anchor" href="#invariance-between-the-taylor-swift-and-midnights-albums"></a>
</h3>
<p>Taking this analysis a step further, the themes can be analyzed for
configural and metric invariance to determine whether there are thematic
differences in lyrics between Taylor Swift’s first and most recent
albums.</p>
<p>This analysis mimics analyses that might be performed using text data
from an intervention or therapy study (e.g., pre/post,
experiment/control).</p>
<p>The same zero-shot classification analyses (including the same Cross
Encoder RoBERTa model) should be performed using the same themes (i.e.,
classes).</p>
<div class="section level4">
<h4 id="set-up-for-invariance">Set Up for Invariance<a class="anchor" aria-label="anchor" href="#set-up-for-invariance"></a>
</h4>
<p>Check out the mean probabilities of each theme across the albums</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Look at the mean probabilities of both</span></span>
<span><span class="co"># the Taylor Swift and Midnights albums</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">swift_wide</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code>      anxiety    depression     happiness    heartbreak          love 
   0.29990807    0.08411358    0.17911406    0.43607021    0.18423720 
relationships    rebellious       revenge       romance 
   0.43535133    0.63489752    0.34377482    0.26128967 </code></pre>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">colMeans</a></span><span class="op">(</span><span class="va">midnights_wide</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code>      anxiety    depression     happiness    heartbreak          love 
   0.26287701    0.06501335    0.09913873    0.38547405    0.14203493 
relationships    rebellious       revenge       romance 
   0.44492999    0.50933669    0.34219791    0.20906364 </code></pre>
<p>Get <em>p</em>-values for <em>t</em>-tests between each theme</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">swift_wide</span><span class="op">)</span><span class="op">[</span><span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span>, <span class="kw">function</span><span class="op">(</span><span class="va">theme</span><span class="op">)</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/t.test.html" class="external-link">t.test</a></span><span class="op">(</span></span>
<span>      <span class="va">swift_wide</span><span class="op">[</span>,<span class="va">theme</span><span class="op">]</span>, <span class="va">midnights_wide</span><span class="op">[</span>,<span class="va">theme</span><span class="op">]</span>, </span>
<span>      var.equal <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>    <span class="op">)</span><span class="op">$</span><span class="va">p.value</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">)</span></span></code></pre></div>
<pre><code>      anxiety    depression     happiness    heartbreak          love 
  0.297232759   0.131226252   0.020208667   0.273479141   0.260503614 
relationships    rebellious       revenge       romance 
  0.808364926   0.003466896   0.965060122   0.169222094 </code></pre>
<p>Based on means, there are differences between <code>happiness</code>
and <code>rebellious</code>.</p>
<p>To get set up for <code>invariance</code>, groups need to be
created:</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Set up groups</span></span>
<span><span class="va">groups</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Taylor Swift"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">swift_wide</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/rep.html" class="external-link">rep</a></span><span class="op">(</span><span class="st">"Midnights"</span>, <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">midnights_wide</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine datasets</span></span>
<span><span class="va">combined_wide</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span></span>
<span>  <span class="va">swift_wide</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">2</span><span class="op">)</span><span class="op">]</span>, <span class="va">midnights_wide</span><span class="op">[</span>,<span class="op">-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="perform-invariance">Perform Invariance<a class="anchor" aria-label="anchor" href="#perform-invariance"></a>
</h4>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform invariance</span></span>
<span><span class="va">ega_invariance</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/invariance.html">invariance</a></span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="va">combined_wide</span>,</span>
<span>  groups <span class="op">=</span> <span class="va">groups</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">12</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View and plot results</span></span>
<span><span class="va">ega_invariance</span>; <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">ega_invariance</span><span class="op">)</span></span></code></pre></div>
<pre><code> [1;mInvariance Results [0m 
 [4;m
Comparison: Taylor Swift vs Midnights [0m 
              Membership Difference     p  p_BH sig                Direction
anxiety                1      0.286 0.014 0.042   * Taylor Swift &gt; Midnights
depression             1      0.319 0.006 0.027  ** Taylor Swift &gt; Midnights
heartbreak             1     -0.121 0.276 0.497                             
rebellious             1     -0.256 0.006 0.027  ** Taylor Swift &lt; Midnights
revenge                1      0.025 0.752 0.752                             
happiness              2     -0.084 0.532 0.752                             
love                   2     -0.122 0.262 0.497                             
relationships          2      0.032 0.612 0.752                             
romance                2      0.037 0.736 0.752                             
----
Signif. codes: 0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 'n.s.' 1</code></pre>
<p><img src="ega-nlp_files/figure-html/unnamed-chunk-19-1.png" width="768" style="display: block; margin: auto;"></p>
<p>Based on <code>invariance</code>, there is configural invariance but
metric non-invariance for <code>anxiety</code>, <code>depression</code>,
and <code>rebellious</code> themes. <code>anxiety</code> and
<code>depression</code> themes had greater connectivity in the
<em>Taylor Swift</em> album while <code>rebellious</code> themes had
greater connectivity in the <em>Midnights</em> album. In essence, the
two albums captured relatively different negative themes.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Hudson Golino, Alexander Christensen.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
